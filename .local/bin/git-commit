#!/bin/sh

BRANCH_NAME=$(git symbolic-ref --short HEAD)
if [ ! -z "$BRANCH_NAME" ] && [ "$BRANCH_NAME" != "HEAD" ]; then

	TICKET_NO=$(echo $BRANCH_NAME | sed 's/\([0-9]\)-.*$/\1/')

	SUMMARY=$(gum input --value "$TICKET_NO: " --placeholder "Summary of this change")
	DESCRIPTION=$(gum write --placeholder "Details of this change (CTRL+D to finish)")

	# Commit these changes
	gum confirm "Commit changes?" && git commit -m "$SUMMARY" -m "$DESCRIPTION"
fi
